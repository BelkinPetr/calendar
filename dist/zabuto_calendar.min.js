/*! Zabuto Calendar - v2.0.0 - 2017-11-20
* https://github.com/zabuto/calendar
* Copyright (c) 2017 Anke Heijnen; Licensed MIT */

!function(a){!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this._name=f,this._defaults=a.fn[f].defaults,this.settings=a.extend({},this._defaults,c),this.settings.language=this.settings.language.toLowerCase(),this._languages=a.fn[f].languages,null!==this.settings.translation&&this._setTranslation(this.settings.language,this.settings.translation),this.init()}var f="zabuto_calendar",g=new Date;a.fn[f]=function(b){var c;if(b!==d){var g=a.makeArray(arguments);c=g.slice(1)}return this.each(function(){var d=a.data(this,"plugin_"+f);d?"string"==typeof b&&"function"==typeof d[b]&&d[b].apply(d,c):a.data(this,"plugin_"+f,new e(this,b))})},a.fn[f].defaults={year:g.getFullYear(),month:g.getMonth()+1,language:"en",translation:null,week_starts:"monday",show_days:!0,class:null,header_format:"month year",date_format:"y-m-d",navigation:{prev:'<span class="glyphicon glyphicon-chevron-left"></span>',next:'<span class="glyphicon glyphicon-chevron-right"></span>'},onInit:a.noop,onDestroy:a.noop},a.fn[f].languages={},a.extend(e.prototype,{init:function(){var b=a(this.element);b.data("year",this.settings.year),b.data("month",this.settings.month),this.settings.onInit.call(b),this.render()},destroy:function(){var b=a(this.element);this.settings.onDestroy.call(b),b.removeData("plugin_"+f),b.removeData("year"),b.removeData("month"),b.empty()},goto:function(b,c){!1!==this._isValidDate(b,c,1)&&(a(this.element).data("year",b),a(this.element).data("month",c),this.render())},render:function(){var b=a(this.element).data("year"),c=a(this.element).data("month");a(this.element).empty(),this._isValidDate(b,c,1)&&a(this.element).append(this._renderTable(b,c))},_renderTable:function(b,c){var d=a("<table></table>").addClass("zabuto-calendar");this.settings.class&&d.addClass(this.settings.class);var e=a("<thead></thead>");e.append(this._renderNavigation(b,c)),!0===this.settings.show_days&&e.append(this._renderDaysOfWeek());var f=this._renderDaysInMonth(b,c);return d.append(e),d.append(f),d},_renderNavigation:function(b,c){var d=this,e=d.settings.header_format;e=e.replace("year",b.toString());var f=d._getTranslation(d.settings.language);if(null!==f&&"months"in f){var g=f.months;e=e.replace("month",g[c.toString()])}else e=e.replace("month",c.toString());var h=a("<tr></tr>").addClass("zabuto-calendar__navigation").attr("role","navigation"),i=d._renderNavigationItem("prev",d._calculatePrevious(b,c)),j=d._renderNavigationItem("next",d._calculateNext(b,c)),k=a("<span></span>").text(e).data("to",{year:d.settings.year,month:d.settings.month});k.addClass("zabuto-calendar__navigation__item--header__title"),k.on("dblclick",function(){var b=a(this).data("to");d.goto(b.year,b.month)});var l=a("<td></td>");return l.addClass("zabuto-calendar__navigation__item--header"),l.append(k),h.append(i),h.append(l.attr("colspan",5)),h.append(j),h},_renderNavigationItem:function(b,c){var d=this;b=b.toString();var e=a("<td></td>").data("nav",b).data("to",c);return e.addClass("zabuto-calendar__navigation__item--"+b),e.html(d.settings.navigation[b]),e.on("click",function(){var b=a(this).data("to");d.goto(b.year,b.month)}),e},_renderDaysOfWeek:function(){var b=this.settings.week_starts,c={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6"},d=this._getTranslation(this.settings.language);null!==d&&"days"in d&&(c=d.days);var e=a("<tr></tr>").addClass("zabuto-calendar__days-of-week");return 0!==b&&"0"!==b&&"sunday"!==b||e.append(a("<th></th>").text(c[0]).addClass("zabuto-calendar__days-of-week__item")),e.append(a("<th></th>").text(c[1]).addClass("zabuto-calendar__days-of-week__item")),e.append(a("<th></th>").text(c[2]).addClass("zabuto-calendar__days-of-week__item")),e.append(a("<th></th>").text(c[3]).addClass("zabuto-calendar__days-of-week__item")),e.append(a("<th></th>").text(c[4]).addClass("zabuto-calendar__days-of-week__item")),e.append(a("<th></th>").text(c[5]).addClass("zabuto-calendar__days-of-week__item")),e.append(a("<th></th>").text(c[6]).addClass("zabuto-calendar__days-of-week__item")),1!==b&&"1"!==b&&"monday"!==b||e.append(a("<th></th>").text(c[0]).addClass("zabuto-calendar__days-of-week__item")),e},_renderDaysInMonth:function(b,c){var d=this,e=d.settings.week_starts,f=d._calculateWeeksInMonth(b,c),g=d._calculateLastDayOfMonth(b,c),h=d._calculateDayOfWeek(b,c,1),i=[0,1,2,3,4,5,6],j=h;1!==e&&"1"!==e&&"monday"!==e||(i=[1,2,3,4,5,6,7],j=0===h?7:h);for(var k=a("<tbody></tbody>"),l=1,m=1;m<=f;m++){var n=d._renderWeek(m,f);a.each(i,function(e,f){if(1===m&&f<j||l>g)n.append(a("<td></td>").addClass("zabuto-calendar__day--empty"));else{var h=d._renderDay(b,c,l,f);n.append(h),l++}}),k.append(n)}return k},_renderWeek:function(b,c){var d=a("<tr></tr>");return 1===b?d.addClass("zabuto-calendar__week--first"):b===c?d.addClass("zabuto-calendar__week--last"):d.addClass("zabuto-calendar__week"),d},_renderDay:function(b,c,d,e){var f=a("<td></td>").text(d);return f.data("date",this._dateAsString(b,c,d)),f.data("day",d),f.data("dow",7===e?0:e),this._isToday(b,c,d)?(f.data("today",1),f.addClass("zabuto-calendar__day--today")):(f.data("today",0),f.addClass("zabuto-calendar__day")),f},_getTranslation:function(a){var b=this._languages;return a in b?b[a]:null},_setTranslation:function(a,b){return"object"==typeof b&&"months"in b&&"days"in b&&(this._languages[a]=b,!0)},_calculateWeeksInMonth:function(a,b){var c=this.settings.week_starts,d=this._calculateLastDayOfMonth(a,b),e=this._calculateDayOfWeek(a,b,1),f=this._calculateDayOfWeek(a,b,d),g=d,h=e,i=f;1!==c&&"1"!==c&&"monday"!==c||(h=0===e?7:e,i=0===e?7:e);var j=h-i;return j>0&&(g+=j),Math.ceil(g/7)},_calculateLastDayOfMonth:function(a,b){var c=b-1;return new Date(a,c+1,0).getDate()},_calculateDayOfWeek:function(a,b,c){var d=b-1;return new Date(a,d,c).getDay()},_calculatePrevious:function(a,b){var c=a,d=b-1;return 0===d&&(c=a-1,d=12),{year:c,month:d}},_calculateNext:function(a,b){var c=a,d=b+1;return 13===d&&(c=a+1,d=1),{year:c,month:d}},_isValidDate:function(a,b,c){if(b<1||b>12)return!1;var d=b-1,e=new Date(a,d,c);return e.getFullYear()===a&&e.getMonth()===d&&e.getDate()===Number(c)},_isToday:function(a,b,c){var d=b-1,e=new Date;return new Date(a,d,c).toDateString()===e.toDateString()},_dateAsString:function(a,b,c){var d=this.settings.date_format;return c=c<10?"0"+c:c,b=b<10?"0"+b:b,d=d.replace("y",a),d=d.replace("m",b),d=d.replace("d",c)}})}(jQuery,window,document,void 0),a.fn.zabuto_calendar.languages=a.fn.zabuto_calendar.languages||{},a.fn.zabuto_calendar.languages.en={months:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},days:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"}},a.fn.zabuto_calendar.languages.nl={months:{1:"Januari",2:"Februari",3:"Maart",4:"April",5:"Mei",6:"Juni",7:"Juli",8:"Augustus",9:"September",10:"Oktober",11:"November",12:"December"},days:{0:"Zo",1:"Ma",2:"Di",3:"Wo",4:"Do",5:"Vr",6:"Za"}}}(jQuery);